{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"contextValue\"];\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport React, { Component } from 'react';\nimport isEqual from 'react-fast-compare';\nimport { shallowEqual, getDisplayName, removeEmptyKey } from \"./utils.js\";\nimport { InstantSearchConsumer, IndexConsumer } from \"./context.js\";\n/**\n * Connectors are the HOC used to transform React components\n * into InstantSearch widgets.\n * In order to simplify the construction of such connectors\n * `createConnector` takes a description and transform it into\n * a connector.\n * @param {ConnectorDescription} connectorDesc the description of the connector\n * @return {Connector} a function that wraps a component into\n * an instantsearch connected one.\n */\n\nexport function createConnectorWithoutContext(connectorDesc) {\n  if (!connectorDesc.displayName) {\n    throw new Error('`createConnector` requires you to provide a `displayName` property.');\n  }\n\n  var isWidget = typeof connectorDesc.getSearchParameters === 'function' || typeof connectorDesc.getMetadata === 'function' || typeof connectorDesc.transitionState === 'function';\n  return function (Composed) {\n    var Connector = /*#__PURE__*/function (_Component) {\n      _inherits(Connector, _Component);\n\n      var _super = _createSuper(Connector);\n\n      function Connector(props) {\n        var _this;\n\n        _classCallCheck(this, Connector);\n\n        _this = _super.call(this, props);\n\n        _defineProperty(_assertThisInitialized(_this), \"unsubscribe\", void 0);\n\n        _defineProperty(_assertThisInitialized(_this), \"unregisterWidget\", void 0);\n\n        _defineProperty(_assertThisInitialized(_this), \"isUnmounting\", false);\n\n        _defineProperty(_assertThisInitialized(_this), \"state\", {\n          providedProps: _this.getProvidedProps(_this.props)\n        });\n\n        _defineProperty(_assertThisInitialized(_this), \"refine\", function () {\n          var _ref;\n\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          _this.props.contextValue.onInternalStateUpdate( // refine will always be defined here because the prop is only given conditionally\n          (_ref = connectorDesc.refine).call.apply(_ref, [_assertThisInitialized(_this), _this.props, _this.props.contextValue.store.getState().widgets].concat(args)));\n        });\n\n        _defineProperty(_assertThisInitialized(_this), \"createURL\", function () {\n          var _ref2;\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          return _this.props.contextValue.createHrefForState( // refine will always be defined here because the prop is only given conditionally\n          (_ref2 = connectorDesc.refine).call.apply(_ref2, [_assertThisInitialized(_this), _this.props, _this.props.contextValue.store.getState().widgets].concat(args)));\n        });\n\n        _defineProperty(_assertThisInitialized(_this), \"searchForFacetValues\", function () {\n          var _ref3;\n\n          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n          }\n\n          _this.props.contextValue.onSearchForFacetValues( // searchForFacetValues will always be defined here because the prop is only given conditionally\n          (_ref3 = connectorDesc.searchForFacetValues).call.apply(_ref3, [_assertThisInitialized(_this), _this.props, _this.props.contextValue.store.getState().widgets].concat(args)));\n        });\n\n        if (connectorDesc.getSearchParameters) {\n          _this.props.contextValue.onSearchParameters(connectorDesc.getSearchParameters.bind(_assertThisInitialized(_this)), {\n            ais: _this.props.contextValue,\n            multiIndexContext: _this.props.indexContextValue\n          }, _this.props, connectorDesc.getMetadata && connectorDesc.getMetadata.bind(_assertThisInitialized(_this)));\n        }\n\n        return _this;\n      }\n\n      _createClass(Connector, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this2 = this;\n\n          this.unsubscribe = this.props.contextValue.store.subscribe(function () {\n            if (!_this2.isUnmounting) {\n              _this2.setState({\n                providedProps: _this2.getProvidedProps(_this2.props)\n              });\n            }\n          });\n\n          if (isWidget) {\n            this.unregisterWidget = this.props.contextValue.widgetsManager.registerWidget(this);\n          }\n        }\n      }, {\n        key: \"shouldComponentUpdate\",\n        value: function shouldComponentUpdate(nextProps, nextState) {\n          if (typeof connectorDesc.shouldComponentUpdate === 'function') {\n            return connectorDesc.shouldComponentUpdate.call(this, this.props, nextProps, this.state, nextState);\n          }\n\n          var propsEqual = shallowEqual(this.props, nextProps);\n\n          if (this.state.providedProps === null || nextState.providedProps === null) {\n            if (this.state.providedProps === nextState.providedProps) {\n              return !propsEqual;\n            }\n\n            return true;\n          }\n\n          return !propsEqual || !shallowEqual(this.state.providedProps, nextState.providedProps);\n        }\n      }, {\n        key: \"componentDidUpdate\",\n        value: function componentDidUpdate(prevProps) {\n          if (!isEqual(prevProps, this.props)) {\n            this.setState({\n              providedProps: this.getProvidedProps(this.props)\n            });\n\n            if (isWidget) {\n              this.props.contextValue.widgetsManager.update();\n\n              if (typeof connectorDesc.transitionState === 'function') {\n                this.props.contextValue.onSearchStateChange(connectorDesc.transitionState.call(this, this.props, this.props.contextValue.store.getState().widgets, this.props.contextValue.store.getState().widgets));\n              }\n            }\n          }\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.isUnmounting = true;\n\n          if (this.unsubscribe) {\n            this.unsubscribe();\n          }\n\n          if (this.unregisterWidget) {\n            this.unregisterWidget();\n\n            if (typeof connectorDesc.cleanUp === 'function') {\n              var nextState = connectorDesc.cleanUp.call(this, this.props, this.props.contextValue.store.getState().widgets);\n              this.props.contextValue.store.setState(_objectSpread(_objectSpread({}, this.props.contextValue.store.getState()), {}, {\n                widgets: nextState\n              }));\n              this.props.contextValue.onSearchStateChange(removeEmptyKey(nextState));\n            }\n          }\n        }\n      }, {\n        key: \"getProvidedProps\",\n        value: function getProvidedProps(props) {\n          var _this$props$contextVa = this.props.contextValue.store.getState(),\n              widgets = _this$props$contextVa.widgets,\n              results = _this$props$contextVa.results,\n              resultsFacetValues = _this$props$contextVa.resultsFacetValues,\n              searching = _this$props$contextVa.searching,\n              searchingForFacetValues = _this$props$contextVa.searchingForFacetValues,\n              isSearchStalled = _this$props$contextVa.isSearchStalled,\n              metadata = _this$props$contextVa.metadata,\n              error = _this$props$contextVa.error;\n\n          var searchResults = {\n            results: results,\n            searching: searching,\n            searchingForFacetValues: searchingForFacetValues,\n            isSearchStalled: isSearchStalled,\n            error: error\n          };\n          return connectorDesc.getProvidedProps.call(this, props, widgets, searchResults, metadata, // @MAJOR: move this attribute on the `searchResults` it doesn't\n          // makes sense to have it into a separate argument. The search\n          // flags are on the object why not the results?\n          resultsFacetValues);\n        }\n      }, {\n        key: \"getSearchParameters\",\n        value: function getSearchParameters(searchParameters) {\n          if (typeof connectorDesc.getSearchParameters === 'function') {\n            return connectorDesc.getSearchParameters.call(this, searchParameters, this.props, this.props.contextValue.store.getState().widgets);\n          }\n\n          return null;\n        }\n      }, {\n        key: \"getMetadata\",\n        value: function getMetadata(nextWidgetsState) {\n          if (typeof connectorDesc.getMetadata === 'function') {\n            return connectorDesc.getMetadata.call(this, this.props, nextWidgetsState);\n          }\n\n          return {};\n        }\n      }, {\n        key: \"transitionState\",\n        value: function transitionState(prevWidgetsState, nextWidgetsState) {\n          if (typeof connectorDesc.transitionState === 'function') {\n            return connectorDesc.transitionState.call(this, this.props, prevWidgetsState, nextWidgetsState);\n          }\n\n          return nextWidgetsState;\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this$props = this.props,\n              contextValue = _this$props.contextValue,\n              props = _objectWithoutProperties(_this$props, _excluded);\n\n          var providedProps = this.state.providedProps;\n\n          if (providedProps === null) {\n            return null;\n          }\n\n          var refineProps = typeof connectorDesc.refine === 'function' ? {\n            refine: this.refine,\n            createURL: this.createURL\n          } : {};\n          var searchForFacetValuesProps = typeof connectorDesc.searchForFacetValues === 'function' ? {\n            searchForItems: this.searchForFacetValues\n          } : {};\n          return /*#__PURE__*/React.createElement(Composed, _extends({}, props, providedProps, refineProps, searchForFacetValuesProps));\n        }\n      }]);\n\n      return Connector;\n    }(Component);\n\n    _defineProperty(Connector, \"displayName\", \"\".concat(connectorDesc.displayName, \"(\").concat(getDisplayName(Composed), \")\"));\n\n    _defineProperty(Connector, \"propTypes\", connectorDesc.propTypes);\n\n    _defineProperty(Connector, \"defaultProps\", connectorDesc.defaultProps);\n\n    _defineProperty(Connector, \"_connectorDesc\", connectorDesc);\n\n    return Connector;\n  };\n}\n\nvar createConnectorWithContext = function createConnectorWithContext(connectorDesc) {\n  return function (Composed) {\n    var Connector = createConnectorWithoutContext(connectorDesc)(Composed);\n\n    var ConnectorWrapper = function ConnectorWrapper(props) {\n      return /*#__PURE__*/React.createElement(InstantSearchConsumer, null, function (contextValue) {\n        return /*#__PURE__*/React.createElement(IndexConsumer, null, function (indexContextValue) {\n          return /*#__PURE__*/React.createElement(Connector, _extends({\n            contextValue: contextValue,\n            indexContextValue: indexContextValue\n          }, props));\n        });\n      });\n    };\n\n    return ConnectorWrapper;\n  };\n};\n\nexport default createConnectorWithContext;","map":{"version":3,"sources":["/Users/tingting/code/tin2294/repository-search/node_modules/react-instantsearch-core/dist/es/core/createConnector.js"],"names":["_extends","_objectWithoutProperties","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","_excluded","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","React","Component","isEqual","shallowEqual","getDisplayName","removeEmptyKey","InstantSearchConsumer","IndexConsumer","createConnectorWithoutContext","connectorDesc","displayName","Error","isWidget","getSearchParameters","getMetadata","transitionState","Composed","Connector","_Component","_super","props","_this","providedProps","getProvidedProps","_ref","_len","args","Array","_key","contextValue","onInternalStateUpdate","refine","store","getState","widgets","concat","_ref2","_len2","_key2","createHrefForState","_ref3","_len3","_key3","onSearchForFacetValues","searchForFacetValues","onSearchParameters","bind","ais","multiIndexContext","indexContextValue","value","componentDidMount","_this2","unsubscribe","subscribe","isUnmounting","setState","unregisterWidget","widgetsManager","registerWidget","shouldComponentUpdate","nextProps","nextState","state","propsEqual","componentDidUpdate","prevProps","update","onSearchStateChange","componentWillUnmount","cleanUp","_this$props$contextVa","results","resultsFacetValues","searching","searchingForFacetValues","isSearchStalled","metadata","error","searchResults","searchParameters","nextWidgetsState","prevWidgetsState","render","_this$props","refineProps","createURL","searchForFacetValuesProps","searchForItems","createElement","propTypes","defaultProps","createConnectorWithContext","ConnectorWrapper"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,oCAArB;AACA,OAAOC,wBAAP,MAAqC,oDAArC;AACA,OAAOC,eAAP,MAA4B,2CAA5B;AACA,OAAOC,YAAP,MAAyB,wCAAzB;AACA,OAAOC,sBAAP,MAAmC,kDAAnC;AACA,OAAOC,SAAP,MAAsB,qCAAtB;AACA,OAAOC,0BAAP,MAAuC,sDAAvC;AACA,OAAOC,eAAP,MAA4B,2CAA5B;AACA,OAAOC,eAAP,MAA4B,2CAA5B;AACA,IAAIC,SAAS,GAAG,CAAC,cAAD,CAAhB;;AAEA,SAASC,OAAT,CAAiBC,MAAjB,EAAyBC,cAAzB,EAAyC;AAAE,MAAIC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYF,MAAZ,CAAX;;AAAgC,MAAIG,MAAM,CAACC,qBAAX,EAAkC;AAAE,QAAIC,OAAO,GAAGF,MAAM,CAACC,qBAAP,CAA6BJ,MAA7B,CAAd;;AAAoD,QAAIC,cAAJ,EAAoB;AAAEI,MAAAA,OAAO,GAAGA,OAAO,CAACC,MAAR,CAAe,UAAUC,GAAV,EAAe;AAAE,eAAOJ,MAAM,CAACK,wBAAP,CAAgCR,MAAhC,EAAwCO,GAAxC,EAA6CE,UAApD;AAAiE,OAAjG,CAAV;AAA+G;;AAACP,IAAAA,IAAI,CAACQ,IAAL,CAAUC,KAAV,CAAgBT,IAAhB,EAAsBG,OAAtB;AAAiC;;AAAC,SAAOH,IAAP;AAAc;;AAEzV,SAASU,aAAT,CAAuBC,MAAvB,EAA+B;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,QAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAT,IAAgB,IAAhB,GAAuBC,SAAS,CAACD,CAAD,CAAhC,GAAsC,EAAnD;;AAAuD,QAAIA,CAAC,GAAG,CAAR,EAAW;AAAEf,MAAAA,OAAO,CAACI,MAAM,CAACc,MAAD,CAAP,EAAiB,IAAjB,CAAP,CAA8BC,OAA9B,CAAsC,UAAUC,GAAV,EAAe;AAAEtB,QAAAA,eAAe,CAACgB,MAAD,EAASM,GAAT,EAAcF,MAAM,CAACE,GAAD,CAApB,CAAf;AAA4C,OAAnG;AAAuG,KAApH,MAA0H,IAAIhB,MAAM,CAACiB,yBAAX,EAAsC;AAAEjB,MAAAA,MAAM,CAACkB,gBAAP,CAAwBR,MAAxB,EAAgCV,MAAM,CAACiB,yBAAP,CAAiCH,MAAjC,CAAhC;AAA4E,KAApH,MAA0H;AAAElB,MAAAA,OAAO,CAACI,MAAM,CAACc,MAAD,CAAP,CAAP,CAAwBC,OAAxB,CAAgC,UAAUC,GAAV,EAAe;AAAEhB,QAAAA,MAAM,CAACmB,cAAP,CAAsBT,MAAtB,EAA8BM,GAA9B,EAAmChB,MAAM,CAACK,wBAAP,CAAgCS,MAAhC,EAAwCE,GAAxC,CAAnC;AAAmF,OAApI;AAAwI;AAAE;;AAAC,SAAON,MAAP;AAAgB;;AAEthB,SAASU,YAAT,CAAsBC,OAAtB,EAA+B;AAAE,MAAIC,yBAAyB,GAAGC,yBAAyB,EAAzD;;AAA6D,SAAO,SAASC,oBAAT,GAAgC;AAAE,QAAIC,KAAK,GAAGhC,eAAe,CAAC4B,OAAD,CAA3B;AAAA,QAAsCK,MAAtC;;AAA8C,QAAIJ,yBAAJ,EAA+B;AAAE,UAAIK,SAAS,GAAGlC,eAAe,CAAC,IAAD,CAAf,CAAsBmC,WAAtC;;AAAmDF,MAAAA,MAAM,GAAGG,OAAO,CAACC,SAAR,CAAkBL,KAAlB,EAAyBb,SAAzB,EAAoCe,SAApC,CAAT;AAA0D,KAA9I,MAAoJ;AAAED,MAAAA,MAAM,GAAGD,KAAK,CAACjB,KAAN,CAAY,IAAZ,EAAkBI,SAAlB,CAAT;AAAwC;;AAAC,WAAOpB,0BAA0B,CAAC,IAAD,EAAOkC,MAAP,CAAjC;AAAkD,GAAxU;AAA2U;;AAEza,SAASH,yBAAT,GAAqC;AAAE,MAAI,OAAOM,OAAP,KAAmB,WAAnB,IAAkC,CAACA,OAAO,CAACC,SAA/C,EAA0D,OAAO,KAAP;AAAc,MAAID,OAAO,CAACC,SAAR,CAAkBC,IAAtB,EAA4B,OAAO,KAAP;AAAc,MAAI,OAAOC,KAAP,KAAiB,UAArB,EAAiC,OAAO,IAAP;;AAAa,MAAI;AAAEC,IAAAA,OAAO,CAACC,SAAR,CAAkBC,OAAlB,CAA0BC,IAA1B,CAA+BP,OAAO,CAACC,SAAR,CAAkBG,OAAlB,EAA2B,EAA3B,EAA+B,YAAY,CAAE,CAA7C,CAA/B;AAAgF,WAAO,IAAP;AAAc,GAApG,CAAqG,OAAOI,CAAP,EAAU;AAAE,WAAO,KAAP;AAAe;AAAE;;AAEzU,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,SAASC,YAAT,EAAuBC,cAAvB,EAAuCC,cAAvC,QAA6D,YAA7D;AACA,SAASC,qBAAT,EAAgCC,aAAhC,QAAqD,cAArD;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,6BAAT,CAAuCC,aAAvC,EAAsD;AAC3D,MAAI,CAACA,aAAa,CAACC,WAAnB,EAAgC;AAC9B,UAAM,IAAIC,KAAJ,CAAU,qEAAV,CAAN;AACD;;AAED,MAAIC,QAAQ,GAAG,OAAOH,aAAa,CAACI,mBAArB,KAA6C,UAA7C,IAA2D,OAAOJ,aAAa,CAACK,WAArB,KAAqC,UAAhG,IAA8G,OAAOL,aAAa,CAACM,eAArB,KAAyC,UAAtK;AACA,SAAO,UAAUC,QAAV,EAAoB;AACzB,QAAIC,SAAS,GAAG,aAAa,UAAUC,UAAV,EAAsB;AACjDjE,MAAAA,SAAS,CAACgE,SAAD,EAAYC,UAAZ,CAAT;;AAEA,UAAIC,MAAM,GAAGrC,YAAY,CAACmC,SAAD,CAAzB;;AAEA,eAASA,SAAT,CAAmBG,KAAnB,EAA0B;AACxB,YAAIC,KAAJ;;AAEAvE,QAAAA,eAAe,CAAC,IAAD,EAAOmE,SAAP,CAAf;;AAEAI,QAAAA,KAAK,GAAGF,MAAM,CAACrB,IAAP,CAAY,IAAZ,EAAkBsB,KAAlB,CAAR;;AAEAhE,QAAAA,eAAe,CAACJ,sBAAsB,CAACqE,KAAD,CAAvB,EAAgC,aAAhC,EAA+C,KAAK,CAApD,CAAf;;AAEAjE,QAAAA,eAAe,CAACJ,sBAAsB,CAACqE,KAAD,CAAvB,EAAgC,kBAAhC,EAAoD,KAAK,CAAzD,CAAf;;AAEAjE,QAAAA,eAAe,CAACJ,sBAAsB,CAACqE,KAAD,CAAvB,EAAgC,cAAhC,EAAgD,KAAhD,CAAf;;AAEAjE,QAAAA,eAAe,CAACJ,sBAAsB,CAACqE,KAAD,CAAvB,EAAgC,OAAhC,EAAyC;AACtDC,UAAAA,aAAa,EAAED,KAAK,CAACE,gBAAN,CAAuBF,KAAK,CAACD,KAA7B;AADuC,SAAzC,CAAf;;AAIAhE,QAAAA,eAAe,CAACJ,sBAAsB,CAACqE,KAAD,CAAvB,EAAgC,QAAhC,EAA0C,YAAY;AACnE,cAAIG,IAAJ;;AAEA,eAAK,IAAIC,IAAI,GAAGnD,SAAS,CAACC,MAArB,EAA6BmD,IAAI,GAAG,IAAIC,KAAJ,CAAUF,IAAV,CAApC,EAAqDG,IAAI,GAAG,CAAjE,EAAoEA,IAAI,GAAGH,IAA3E,EAAiFG,IAAI,EAArF,EAAyF;AACvFF,YAAAA,IAAI,CAACE,IAAD,CAAJ,GAAatD,SAAS,CAACsD,IAAD,CAAtB;AACD;;AAEDP,UAAAA,KAAK,CAACD,KAAN,CAAYS,YAAZ,CAAyBC,qBAAzB,EAAgD;AAChD,WAACN,IAAI,GAAGf,aAAa,CAACsB,MAAtB,EAA8BjC,IAA9B,CAAmC5B,KAAnC,CAAyCsD,IAAzC,EAA+C,CAACxE,sBAAsB,CAACqE,KAAD,CAAvB,EAAgCA,KAAK,CAACD,KAAtC,EAA6CC,KAAK,CAACD,KAAN,CAAYS,YAAZ,CAAyBG,KAAzB,CAA+BC,QAA/B,GAA0CC,OAAvF,EAAgGC,MAAhG,CAAuGT,IAAvG,CAA/C,CADA;AAED,SATc,CAAf;;AAWAtE,QAAAA,eAAe,CAACJ,sBAAsB,CAACqE,KAAD,CAAvB,EAAgC,WAAhC,EAA6C,YAAY;AACtE,cAAIe,KAAJ;;AAEA,eAAK,IAAIC,KAAK,GAAG/D,SAAS,CAACC,MAAtB,EAA8BmD,IAAI,GAAG,IAAIC,KAAJ,CAAUU,KAAV,CAArC,EAAuDC,KAAK,GAAG,CAApE,EAAuEA,KAAK,GAAGD,KAA/E,EAAsFC,KAAK,EAA3F,EAA+F;AAC7FZ,YAAAA,IAAI,CAACY,KAAD,CAAJ,GAAchE,SAAS,CAACgE,KAAD,CAAvB;AACD;;AAED,iBAAOjB,KAAK,CAACD,KAAN,CAAYS,YAAZ,CAAyBU,kBAAzB,EAA6C;AACpD,WAACH,KAAK,GAAG3B,aAAa,CAACsB,MAAvB,EAA+BjC,IAA/B,CAAoC5B,KAApC,CAA0CkE,KAA1C,EAAiD,CAACpF,sBAAsB,CAACqE,KAAD,CAAvB,EAAgCA,KAAK,CAACD,KAAtC,EAA6CC,KAAK,CAACD,KAAN,CAAYS,YAAZ,CAAyBG,KAAzB,CAA+BC,QAA/B,GAA0CC,OAAvF,EAAgGC,MAAhG,CAAuGT,IAAvG,CAAjD,CADO,CAAP;AAED,SATc,CAAf;;AAWAtE,QAAAA,eAAe,CAACJ,sBAAsB,CAACqE,KAAD,CAAvB,EAAgC,sBAAhC,EAAwD,YAAY;AACjF,cAAImB,KAAJ;;AAEA,eAAK,IAAIC,KAAK,GAAGnE,SAAS,CAACC,MAAtB,EAA8BmD,IAAI,GAAG,IAAIC,KAAJ,CAAUc,KAAV,CAArC,EAAuDC,KAAK,GAAG,CAApE,EAAuEA,KAAK,GAAGD,KAA/E,EAAsFC,KAAK,EAA3F,EAA+F;AAC7FhB,YAAAA,IAAI,CAACgB,KAAD,CAAJ,GAAcpE,SAAS,CAACoE,KAAD,CAAvB;AACD;;AAEDrB,UAAAA,KAAK,CAACD,KAAN,CAAYS,YAAZ,CAAyBc,sBAAzB,EAAiD;AACjD,WAACH,KAAK,GAAG/B,aAAa,CAACmC,oBAAvB,EAA6C9C,IAA7C,CAAkD5B,KAAlD,CAAwDsE,KAAxD,EAA+D,CAACxF,sBAAsB,CAACqE,KAAD,CAAvB,EAAgCA,KAAK,CAACD,KAAtC,EAA6CC,KAAK,CAACD,KAAN,CAAYS,YAAZ,CAAyBG,KAAzB,CAA+BC,QAA/B,GAA0CC,OAAvF,EAAgGC,MAAhG,CAAuGT,IAAvG,CAA/D,CADA;AAED,SATc,CAAf;;AAWA,YAAIjB,aAAa,CAACI,mBAAlB,EAAuC;AACrCQ,UAAAA,KAAK,CAACD,KAAN,CAAYS,YAAZ,CAAyBgB,kBAAzB,CAA4CpC,aAAa,CAACI,mBAAd,CAAkCiC,IAAlC,CAAuC9F,sBAAsB,CAACqE,KAAD,CAA7D,CAA5C,EAAmH;AACjH0B,YAAAA,GAAG,EAAE1B,KAAK,CAACD,KAAN,CAAYS,YADgG;AAEjHmB,YAAAA,iBAAiB,EAAE3B,KAAK,CAACD,KAAN,CAAY6B;AAFkF,WAAnH,EAGG5B,KAAK,CAACD,KAHT,EAGgBX,aAAa,CAACK,WAAd,IAA6BL,aAAa,CAACK,WAAd,CAA0BgC,IAA1B,CAA+B9F,sBAAsB,CAACqE,KAAD,CAArD,CAH7C;AAID;;AAED,eAAOA,KAAP;AACD;;AAEDtE,MAAAA,YAAY,CAACkE,SAAD,EAAY,CAAC;AACvBvC,QAAAA,GAAG,EAAE,mBADkB;AAEvBwE,QAAAA,KAAK,EAAE,SAASC,iBAAT,GAA6B;AAClC,cAAIC,MAAM,GAAG,IAAb;;AAEA,eAAKC,WAAL,GAAmB,KAAKjC,KAAL,CAAWS,YAAX,CAAwBG,KAAxB,CAA8BsB,SAA9B,CAAwC,YAAY;AACrE,gBAAI,CAACF,MAAM,CAACG,YAAZ,EAA0B;AACxBH,cAAAA,MAAM,CAACI,QAAP,CAAgB;AACdlC,gBAAAA,aAAa,EAAE8B,MAAM,CAAC7B,gBAAP,CAAwB6B,MAAM,CAAChC,KAA/B;AADD,eAAhB;AAGD;AACF,WANkB,CAAnB;;AAQA,cAAIR,QAAJ,EAAc;AACZ,iBAAK6C,gBAAL,GAAwB,KAAKrC,KAAL,CAAWS,YAAX,CAAwB6B,cAAxB,CAAuCC,cAAvC,CAAsD,IAAtD,CAAxB;AACD;AACF;AAhBsB,OAAD,EAiBrB;AACDjF,QAAAA,GAAG,EAAE,uBADJ;AAEDwE,QAAAA,KAAK,EAAE,SAASU,qBAAT,CAA+BC,SAA/B,EAA0CC,SAA1C,EAAqD;AAC1D,cAAI,OAAOrD,aAAa,CAACmD,qBAArB,KAA+C,UAAnD,EAA+D;AAC7D,mBAAOnD,aAAa,CAACmD,qBAAd,CAAoC9D,IAApC,CAAyC,IAAzC,EAA+C,KAAKsB,KAApD,EAA2DyC,SAA3D,EAAsE,KAAKE,KAA3E,EAAkFD,SAAlF,CAAP;AACD;;AAED,cAAIE,UAAU,GAAG7D,YAAY,CAAC,KAAKiB,KAAN,EAAayC,SAAb,CAA7B;;AAEA,cAAI,KAAKE,KAAL,CAAWzC,aAAX,KAA6B,IAA7B,IAAqCwC,SAAS,CAACxC,aAAV,KAA4B,IAArE,EAA2E;AACzE,gBAAI,KAAKyC,KAAL,CAAWzC,aAAX,KAA6BwC,SAAS,CAACxC,aAA3C,EAA0D;AACxD,qBAAO,CAAC0C,UAAR;AACD;;AAED,mBAAO,IAAP;AACD;;AAED,iBAAO,CAACA,UAAD,IAAe,CAAC7D,YAAY,CAAC,KAAK4D,KAAL,CAAWzC,aAAZ,EAA2BwC,SAAS,CAACxC,aAArC,CAAnC;AACD;AAlBA,OAjBqB,EAoCrB;AACD5C,QAAAA,GAAG,EAAE,oBADJ;AAEDwE,QAAAA,KAAK,EAAE,SAASe,kBAAT,CAA4BC,SAA5B,EAAuC;AAC5C,cAAI,CAAChE,OAAO,CAACgE,SAAD,EAAY,KAAK9C,KAAjB,CAAZ,EAAqC;AACnC,iBAAKoC,QAAL,CAAc;AACZlC,cAAAA,aAAa,EAAE,KAAKC,gBAAL,CAAsB,KAAKH,KAA3B;AADH,aAAd;;AAIA,gBAAIR,QAAJ,EAAc;AACZ,mBAAKQ,KAAL,CAAWS,YAAX,CAAwB6B,cAAxB,CAAuCS,MAAvC;;AAEA,kBAAI,OAAO1D,aAAa,CAACM,eAArB,KAAyC,UAA7C,EAAyD;AACvD,qBAAKK,KAAL,CAAWS,YAAX,CAAwBuC,mBAAxB,CAA4C3D,aAAa,CAACM,eAAd,CAA8BjB,IAA9B,CAAmC,IAAnC,EAAyC,KAAKsB,KAA9C,EAAqD,KAAKA,KAAL,CAAWS,YAAX,CAAwBG,KAAxB,CAA8BC,QAA9B,GAAyCC,OAA9F,EAAuG,KAAKd,KAAL,CAAWS,YAAX,CAAwBG,KAAxB,CAA8BC,QAA9B,GAAyCC,OAAhJ,CAA5C;AACD;AACF;AACF;AACF;AAhBA,OApCqB,EAqDrB;AACDxD,QAAAA,GAAG,EAAE,sBADJ;AAEDwE,QAAAA,KAAK,EAAE,SAASmB,oBAAT,GAAgC;AACrC,eAAKd,YAAL,GAAoB,IAApB;;AAEA,cAAI,KAAKF,WAAT,EAAsB;AACpB,iBAAKA,WAAL;AACD;;AAED,cAAI,KAAKI,gBAAT,EAA2B;AACzB,iBAAKA,gBAAL;;AAEA,gBAAI,OAAOhD,aAAa,CAAC6D,OAArB,KAAiC,UAArC,EAAiD;AAC/C,kBAAIR,SAAS,GAAGrD,aAAa,CAAC6D,OAAd,CAAsBxE,IAAtB,CAA2B,IAA3B,EAAiC,KAAKsB,KAAtC,EAA6C,KAAKA,KAAL,CAAWS,YAAX,CAAwBG,KAAxB,CAA8BC,QAA9B,GAAyCC,OAAtF,CAAhB;AACA,mBAAKd,KAAL,CAAWS,YAAX,CAAwBG,KAAxB,CAA8BwB,QAA9B,CAAuCrF,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK,KAAKiD,KAAL,CAAWS,YAAX,CAAwBG,KAAxB,CAA8BC,QAA9B,EAAL,CAAd,EAA8D,EAA9D,EAAkE;AACpHC,gBAAAA,OAAO,EAAE4B;AAD2G,eAAlE,CAApD;AAGA,mBAAK1C,KAAL,CAAWS,YAAX,CAAwBuC,mBAAxB,CAA4C/D,cAAc,CAACyD,SAAD,CAA1D;AACD;AACF;AACF;AApBA,OArDqB,EA0ErB;AACDpF,QAAAA,GAAG,EAAE,kBADJ;AAEDwE,QAAAA,KAAK,EAAE,SAAS3B,gBAAT,CAA0BH,KAA1B,EAAiC;AACtC,cAAImD,qBAAqB,GAAG,KAAKnD,KAAL,CAAWS,YAAX,CAAwBG,KAAxB,CAA8BC,QAA9B,EAA5B;AAAA,cACIC,OAAO,GAAGqC,qBAAqB,CAACrC,OADpC;AAAA,cAEIsC,OAAO,GAAGD,qBAAqB,CAACC,OAFpC;AAAA,cAGIC,kBAAkB,GAAGF,qBAAqB,CAACE,kBAH/C;AAAA,cAIIC,SAAS,GAAGH,qBAAqB,CAACG,SAJtC;AAAA,cAKIC,uBAAuB,GAAGJ,qBAAqB,CAACI,uBALpD;AAAA,cAMIC,eAAe,GAAGL,qBAAqB,CAACK,eAN5C;AAAA,cAOIC,QAAQ,GAAGN,qBAAqB,CAACM,QAPrC;AAAA,cAQIC,KAAK,GAAGP,qBAAqB,CAACO,KARlC;;AAUA,cAAIC,aAAa,GAAG;AAClBP,YAAAA,OAAO,EAAEA,OADS;AAElBE,YAAAA,SAAS,EAAEA,SAFO;AAGlBC,YAAAA,uBAAuB,EAAEA,uBAHP;AAIlBC,YAAAA,eAAe,EAAEA,eAJC;AAKlBE,YAAAA,KAAK,EAAEA;AALW,WAApB;AAOA,iBAAOrE,aAAa,CAACc,gBAAd,CAA+BzB,IAA/B,CAAoC,IAApC,EAA0CsB,KAA1C,EAAiDc,OAAjD,EAA0D6C,aAA1D,EAAyEF,QAAzE,EAAmF;AAC1F;AACA;AACAJ,UAAAA,kBAHO,CAAP;AAID;AAxBA,OA1EqB,EAmGrB;AACD/F,QAAAA,GAAG,EAAE,qBADJ;AAEDwE,QAAAA,KAAK,EAAE,SAASrC,mBAAT,CAA6BmE,gBAA7B,EAA+C;AACpD,cAAI,OAAOvE,aAAa,CAACI,mBAArB,KAA6C,UAAjD,EAA6D;AAC3D,mBAAOJ,aAAa,CAACI,mBAAd,CAAkCf,IAAlC,CAAuC,IAAvC,EAA6CkF,gBAA7C,EAA+D,KAAK5D,KAApE,EAA2E,KAAKA,KAAL,CAAWS,YAAX,CAAwBG,KAAxB,CAA8BC,QAA9B,GAAyCC,OAApH,CAAP;AACD;;AAED,iBAAO,IAAP;AACD;AARA,OAnGqB,EA4GrB;AACDxD,QAAAA,GAAG,EAAE,aADJ;AAEDwE,QAAAA,KAAK,EAAE,SAASpC,WAAT,CAAqBmE,gBAArB,EAAuC;AAC5C,cAAI,OAAOxE,aAAa,CAACK,WAArB,KAAqC,UAAzC,EAAqD;AACnD,mBAAOL,aAAa,CAACK,WAAd,CAA0BhB,IAA1B,CAA+B,IAA/B,EAAqC,KAAKsB,KAA1C,EAAiD6D,gBAAjD,CAAP;AACD;;AAED,iBAAO,EAAP;AACD;AARA,OA5GqB,EAqHrB;AACDvG,QAAAA,GAAG,EAAE,iBADJ;AAEDwE,QAAAA,KAAK,EAAE,SAASnC,eAAT,CAAyBmE,gBAAzB,EAA2CD,gBAA3C,EAA6D;AAClE,cAAI,OAAOxE,aAAa,CAACM,eAArB,KAAyC,UAA7C,EAAyD;AACvD,mBAAON,aAAa,CAACM,eAAd,CAA8BjB,IAA9B,CAAmC,IAAnC,EAAyC,KAAKsB,KAA9C,EAAqD8D,gBAArD,EAAuED,gBAAvE,CAAP;AACD;;AAED,iBAAOA,gBAAP;AACD;AARA,OArHqB,EA8HrB;AACDvG,QAAAA,GAAG,EAAE,QADJ;AAEDwE,QAAAA,KAAK,EAAE,SAASiC,MAAT,GAAkB;AACvB,cAAIC,WAAW,GAAG,KAAKhE,KAAvB;AAAA,cACIS,YAAY,GAAGuD,WAAW,CAACvD,YAD/B;AAAA,cAEIT,KAAK,GAAGvE,wBAAwB,CAACuI,WAAD,EAAc/H,SAAd,CAFpC;;AAIA,cAAIiE,aAAa,GAAG,KAAKyC,KAAL,CAAWzC,aAA/B;;AAEA,cAAIA,aAAa,KAAK,IAAtB,EAA4B;AAC1B,mBAAO,IAAP;AACD;;AAED,cAAI+D,WAAW,GAAG,OAAO5E,aAAa,CAACsB,MAArB,KAAgC,UAAhC,GAA6C;AAC7DA,YAAAA,MAAM,EAAE,KAAKA,MADgD;AAE7DuD,YAAAA,SAAS,EAAE,KAAKA;AAF6C,WAA7C,GAGd,EAHJ;AAIA,cAAIC,yBAAyB,GAAG,OAAO9E,aAAa,CAACmC,oBAArB,KAA8C,UAA9C,GAA2D;AACzF4C,YAAAA,cAAc,EAAE,KAAK5C;AADoE,WAA3D,GAE5B,EAFJ;AAGA,iBAAO,aAAa5C,KAAK,CAACyF,aAAN,CAAoBzE,QAApB,EAA8BpE,QAAQ,CAAC,EAAD,EAAKwE,KAAL,EAAYE,aAAZ,EAA2B+D,WAA3B,EAAwCE,yBAAxC,CAAtC,CAApB;AACD;AArBA,OA9HqB,CAAZ,CAAZ;;AAsJA,aAAOtE,SAAP;AACD,KAxN4B,CAwN3BhB,SAxN2B,CAA7B;;AA0NA7C,IAAAA,eAAe,CAAC6D,SAAD,EAAY,aAAZ,EAA2B,GAAGkB,MAAH,CAAU1B,aAAa,CAACC,WAAxB,EAAqC,GAArC,EAA0CyB,MAA1C,CAAiD/B,cAAc,CAACY,QAAD,CAA/D,EAA2E,GAA3E,CAA3B,CAAf;;AAEA5D,IAAAA,eAAe,CAAC6D,SAAD,EAAY,WAAZ,EAAyBR,aAAa,CAACiF,SAAvC,CAAf;;AAEAtI,IAAAA,eAAe,CAAC6D,SAAD,EAAY,cAAZ,EAA4BR,aAAa,CAACkF,YAA1C,CAAf;;AAEAvI,IAAAA,eAAe,CAAC6D,SAAD,EAAY,gBAAZ,EAA8BR,aAA9B,CAAf;;AAEA,WAAOQ,SAAP;AACD,GApOD;AAqOD;;AAED,IAAI2E,0BAA0B,GAAG,SAASA,0BAAT,CAAoCnF,aAApC,EAAmD;AAClF,SAAO,UAAUO,QAAV,EAAoB;AACzB,QAAIC,SAAS,GAAGT,6BAA6B,CAACC,aAAD,CAA7B,CAA6CO,QAA7C,CAAhB;;AAEA,QAAI6E,gBAAgB,GAAG,SAASA,gBAAT,CAA0BzE,KAA1B,EAAiC;AACtD,aAAO,aAAapB,KAAK,CAACyF,aAAN,CAAoBnF,qBAApB,EAA2C,IAA3C,EAAiD,UAAUuB,YAAV,EAAwB;AAC3F,eAAO,aAAa7B,KAAK,CAACyF,aAAN,CAAoBlF,aAApB,EAAmC,IAAnC,EAAyC,UAAU0C,iBAAV,EAA6B;AACxF,iBAAO,aAAajD,KAAK,CAACyF,aAAN,CAAoBxE,SAApB,EAA+BrE,QAAQ,CAAC;AAC1DiF,YAAAA,YAAY,EAAEA,YAD4C;AAE1DoB,YAAAA,iBAAiB,EAAEA;AAFuC,WAAD,EAGxD7B,KAHwD,CAAvC,CAApB;AAID,SALmB,CAApB;AAMD,OAPmB,CAApB;AAQD,KATD;;AAWA,WAAOyE,gBAAP;AACD,GAfD;AAgBD,CAjBD;;AAmBA,eAAeD,0BAAf","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"contextValue\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport isEqual from 'react-fast-compare';\nimport { shallowEqual, getDisplayName, removeEmptyKey } from \"./utils.js\";\nimport { InstantSearchConsumer, IndexConsumer } from \"./context.js\";\n\n/**\n * Connectors are the HOC used to transform React components\n * into InstantSearch widgets.\n * In order to simplify the construction of such connectors\n * `createConnector` takes a description and transform it into\n * a connector.\n * @param {ConnectorDescription} connectorDesc the description of the connector\n * @return {Connector} a function that wraps a component into\n * an instantsearch connected one.\n */\nexport function createConnectorWithoutContext(connectorDesc) {\n  if (!connectorDesc.displayName) {\n    throw new Error('`createConnector` requires you to provide a `displayName` property.');\n  }\n\n  var isWidget = typeof connectorDesc.getSearchParameters === 'function' || typeof connectorDesc.getMetadata === 'function' || typeof connectorDesc.transitionState === 'function';\n  return function (Composed) {\n    var Connector = /*#__PURE__*/function (_Component) {\n      _inherits(Connector, _Component);\n\n      var _super = _createSuper(Connector);\n\n      function Connector(props) {\n        var _this;\n\n        _classCallCheck(this, Connector);\n\n        _this = _super.call(this, props);\n\n        _defineProperty(_assertThisInitialized(_this), \"unsubscribe\", void 0);\n\n        _defineProperty(_assertThisInitialized(_this), \"unregisterWidget\", void 0);\n\n        _defineProperty(_assertThisInitialized(_this), \"isUnmounting\", false);\n\n        _defineProperty(_assertThisInitialized(_this), \"state\", {\n          providedProps: _this.getProvidedProps(_this.props)\n        });\n\n        _defineProperty(_assertThisInitialized(_this), \"refine\", function () {\n          var _ref;\n\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          _this.props.contextValue.onInternalStateUpdate( // refine will always be defined here because the prop is only given conditionally\n          (_ref = connectorDesc.refine).call.apply(_ref, [_assertThisInitialized(_this), _this.props, _this.props.contextValue.store.getState().widgets].concat(args)));\n        });\n\n        _defineProperty(_assertThisInitialized(_this), \"createURL\", function () {\n          var _ref2;\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          return _this.props.contextValue.createHrefForState( // refine will always be defined here because the prop is only given conditionally\n          (_ref2 = connectorDesc.refine).call.apply(_ref2, [_assertThisInitialized(_this), _this.props, _this.props.contextValue.store.getState().widgets].concat(args)));\n        });\n\n        _defineProperty(_assertThisInitialized(_this), \"searchForFacetValues\", function () {\n          var _ref3;\n\n          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n          }\n\n          _this.props.contextValue.onSearchForFacetValues( // searchForFacetValues will always be defined here because the prop is only given conditionally\n          (_ref3 = connectorDesc.searchForFacetValues).call.apply(_ref3, [_assertThisInitialized(_this), _this.props, _this.props.contextValue.store.getState().widgets].concat(args)));\n        });\n\n        if (connectorDesc.getSearchParameters) {\n          _this.props.contextValue.onSearchParameters(connectorDesc.getSearchParameters.bind(_assertThisInitialized(_this)), {\n            ais: _this.props.contextValue,\n            multiIndexContext: _this.props.indexContextValue\n          }, _this.props, connectorDesc.getMetadata && connectorDesc.getMetadata.bind(_assertThisInitialized(_this)));\n        }\n\n        return _this;\n      }\n\n      _createClass(Connector, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this2 = this;\n\n          this.unsubscribe = this.props.contextValue.store.subscribe(function () {\n            if (!_this2.isUnmounting) {\n              _this2.setState({\n                providedProps: _this2.getProvidedProps(_this2.props)\n              });\n            }\n          });\n\n          if (isWidget) {\n            this.unregisterWidget = this.props.contextValue.widgetsManager.registerWidget(this);\n          }\n        }\n      }, {\n        key: \"shouldComponentUpdate\",\n        value: function shouldComponentUpdate(nextProps, nextState) {\n          if (typeof connectorDesc.shouldComponentUpdate === 'function') {\n            return connectorDesc.shouldComponentUpdate.call(this, this.props, nextProps, this.state, nextState);\n          }\n\n          var propsEqual = shallowEqual(this.props, nextProps);\n\n          if (this.state.providedProps === null || nextState.providedProps === null) {\n            if (this.state.providedProps === nextState.providedProps) {\n              return !propsEqual;\n            }\n\n            return true;\n          }\n\n          return !propsEqual || !shallowEqual(this.state.providedProps, nextState.providedProps);\n        }\n      }, {\n        key: \"componentDidUpdate\",\n        value: function componentDidUpdate(prevProps) {\n          if (!isEqual(prevProps, this.props)) {\n            this.setState({\n              providedProps: this.getProvidedProps(this.props)\n            });\n\n            if (isWidget) {\n              this.props.contextValue.widgetsManager.update();\n\n              if (typeof connectorDesc.transitionState === 'function') {\n                this.props.contextValue.onSearchStateChange(connectorDesc.transitionState.call(this, this.props, this.props.contextValue.store.getState().widgets, this.props.contextValue.store.getState().widgets));\n              }\n            }\n          }\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.isUnmounting = true;\n\n          if (this.unsubscribe) {\n            this.unsubscribe();\n          }\n\n          if (this.unregisterWidget) {\n            this.unregisterWidget();\n\n            if (typeof connectorDesc.cleanUp === 'function') {\n              var nextState = connectorDesc.cleanUp.call(this, this.props, this.props.contextValue.store.getState().widgets);\n              this.props.contextValue.store.setState(_objectSpread(_objectSpread({}, this.props.contextValue.store.getState()), {}, {\n                widgets: nextState\n              }));\n              this.props.contextValue.onSearchStateChange(removeEmptyKey(nextState));\n            }\n          }\n        }\n      }, {\n        key: \"getProvidedProps\",\n        value: function getProvidedProps(props) {\n          var _this$props$contextVa = this.props.contextValue.store.getState(),\n              widgets = _this$props$contextVa.widgets,\n              results = _this$props$contextVa.results,\n              resultsFacetValues = _this$props$contextVa.resultsFacetValues,\n              searching = _this$props$contextVa.searching,\n              searchingForFacetValues = _this$props$contextVa.searchingForFacetValues,\n              isSearchStalled = _this$props$contextVa.isSearchStalled,\n              metadata = _this$props$contextVa.metadata,\n              error = _this$props$contextVa.error;\n\n          var searchResults = {\n            results: results,\n            searching: searching,\n            searchingForFacetValues: searchingForFacetValues,\n            isSearchStalled: isSearchStalled,\n            error: error\n          };\n          return connectorDesc.getProvidedProps.call(this, props, widgets, searchResults, metadata, // @MAJOR: move this attribute on the `searchResults` it doesn't\n          // makes sense to have it into a separate argument. The search\n          // flags are on the object why not the results?\n          resultsFacetValues);\n        }\n      }, {\n        key: \"getSearchParameters\",\n        value: function getSearchParameters(searchParameters) {\n          if (typeof connectorDesc.getSearchParameters === 'function') {\n            return connectorDesc.getSearchParameters.call(this, searchParameters, this.props, this.props.contextValue.store.getState().widgets);\n          }\n\n          return null;\n        }\n      }, {\n        key: \"getMetadata\",\n        value: function getMetadata(nextWidgetsState) {\n          if (typeof connectorDesc.getMetadata === 'function') {\n            return connectorDesc.getMetadata.call(this, this.props, nextWidgetsState);\n          }\n\n          return {};\n        }\n      }, {\n        key: \"transitionState\",\n        value: function transitionState(prevWidgetsState, nextWidgetsState) {\n          if (typeof connectorDesc.transitionState === 'function') {\n            return connectorDesc.transitionState.call(this, this.props, prevWidgetsState, nextWidgetsState);\n          }\n\n          return nextWidgetsState;\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this$props = this.props,\n              contextValue = _this$props.contextValue,\n              props = _objectWithoutProperties(_this$props, _excluded);\n\n          var providedProps = this.state.providedProps;\n\n          if (providedProps === null) {\n            return null;\n          }\n\n          var refineProps = typeof connectorDesc.refine === 'function' ? {\n            refine: this.refine,\n            createURL: this.createURL\n          } : {};\n          var searchForFacetValuesProps = typeof connectorDesc.searchForFacetValues === 'function' ? {\n            searchForItems: this.searchForFacetValues\n          } : {};\n          return /*#__PURE__*/React.createElement(Composed, _extends({}, props, providedProps, refineProps, searchForFacetValuesProps));\n        }\n      }]);\n\n      return Connector;\n    }(Component);\n\n    _defineProperty(Connector, \"displayName\", \"\".concat(connectorDesc.displayName, \"(\").concat(getDisplayName(Composed), \")\"));\n\n    _defineProperty(Connector, \"propTypes\", connectorDesc.propTypes);\n\n    _defineProperty(Connector, \"defaultProps\", connectorDesc.defaultProps);\n\n    _defineProperty(Connector, \"_connectorDesc\", connectorDesc);\n\n    return Connector;\n  };\n}\n\nvar createConnectorWithContext = function createConnectorWithContext(connectorDesc) {\n  return function (Composed) {\n    var Connector = createConnectorWithoutContext(connectorDesc)(Composed);\n\n    var ConnectorWrapper = function ConnectorWrapper(props) {\n      return /*#__PURE__*/React.createElement(InstantSearchConsumer, null, function (contextValue) {\n        return /*#__PURE__*/React.createElement(IndexConsumer, null, function (indexContextValue) {\n          return /*#__PURE__*/React.createElement(Connector, _extends({\n            contextValue: contextValue,\n            indexContextValue: indexContextValue\n          }, props));\n        });\n      });\n    };\n\n    return ConnectorWrapper;\n  };\n};\n\nexport default createConnectorWithContext;"]},"metadata":{},"sourceType":"module"}