{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport React, { Component, Children } from 'react';\nimport isEqual from 'react-fast-compare';\nimport PropTypes from 'prop-types';\nimport createInstantSearchManager from \"../core/createInstantSearchManager.js\";\nimport { InstantSearchProvider } from \"../core/context.js\";\nimport { isMetadataEnabled, injectMetadata } from \"../core/metadata.js\";\n\nfunction isControlled(props) {\n  return Boolean(props.searchState);\n}\n/**\n * @description\n * `<InstantSearch>` is the root component of all React InstantSearch implementations.\n * It provides all the connected components (aka widgets) a means to interact\n * with the searchState.\n * @kind widget\n * @name <InstantSearch>\n * @requirements You will need to have an Algolia account to be able to use this widget.\n * [Create one now](https://www.algolia.com/users/sign_up).\n * @propType {string} indexName - Main index in which to search.\n * @propType {boolean} [refresh=false] - Flag to activate when the cache needs to be cleared so that the front-end is updated when a change occurs in the index.\n * @propType {object} [searchClient] - Provide a custom search client.\n * @propType {func} [onSearchStateChange] - Function to be called everytime a new search is done. Useful for [URL Routing](guide/Routing.html).\n * @propType {object} [searchState] - Object to inject some search state. Switches the InstantSearch component in controlled mode. Useful for [URL Routing](guide/Routing.html).\n * @propType {func} [createURL] - Function to call when creating links, useful for [URL Routing](guide/Routing.html).\n * @propType {SearchResults|SearchResults[]} [resultsState] - Use this to inject the results that will be used at first rendering. Those results are found by using the `findResultsState` function. Useful for [Server Side Rendering](guide/Server-side_rendering.html).\n * @propType {number} [stalledSearchDelay=200] - The amount of time before considering that the search takes too much time. The time is expressed in milliseconds.\n * @propType {{ Root: string|function, props: object }} [root] - Use this to customize the root element. Default value: `{ Root: 'div' }`\n * @example\n * import React from 'react';\n * import algoliasearch from 'algoliasearch/lite';\n * import { InstantSearch, SearchBox, Hits } from 'react-instantsearch-dom';\n *\n * const searchClient = algoliasearch(\n *   'latency',\n *   '6be0576ff61c053d5f9a3225e2a90f76'\n * );\n *\n * const App = () => (\n *   <InstantSearch\n *     searchClient={searchClient}\n *     indexName=\"instant_search\"\n *   >\n *     <SearchBox />\n *     <Hits />\n *   </InstantSearch>\n * );\n */\n\n\nvar InstantSearch = /*#__PURE__*/function (_Component) {\n  _inherits(InstantSearch, _Component);\n\n  var _super = _createSuper(InstantSearch);\n\n  function InstantSearch(props) {\n    var _this;\n\n    _classCallCheck(this, InstantSearch);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"isUnmounting\", false);\n\n    var instantSearchManager = createInstantSearchManager({\n      indexName: _this.props.indexName,\n      searchClient: _this.props.searchClient,\n      initialState: _this.props.searchState || {},\n      resultsState: _this.props.resultsState,\n      stalledSearchDelay: _this.props.stalledSearchDelay\n    });\n    var contextValue = {\n      store: instantSearchManager.store,\n      widgetsManager: instantSearchManager.widgetsManager,\n      mainTargetedIndex: _this.props.indexName,\n      onInternalStateUpdate: _this.onWidgetsInternalStateUpdate.bind(_assertThisInitialized(_this)),\n      createHrefForState: _this.createHrefForState.bind(_assertThisInitialized(_this)),\n      onSearchForFacetValues: _this.onSearchForFacetValues.bind(_assertThisInitialized(_this)),\n      onSearchStateChange: _this.onSearchStateChange.bind(_assertThisInitialized(_this)),\n      onSearchParameters: _this.onSearchParameters.bind(_assertThisInitialized(_this))\n    };\n    _this.state = {\n      isControlled: isControlled(_this.props),\n      instantSearchManager: instantSearchManager,\n      contextValue: contextValue\n    };\n    return _this;\n  }\n\n  _createClass(InstantSearch, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var prevIsControlled = isControlled(prevProps);\n\n      if (prevIsControlled && !this.state.isControlled) {\n        throw new Error(\"You can't switch <InstantSearch> from being controlled to uncontrolled\");\n      }\n\n      if (!prevIsControlled && this.state.isControlled) {\n        throw new Error(\"You can't switch <InstantSearch> from being uncontrolled to controlled\");\n      }\n\n      if (this.props.refresh !== prevProps.refresh && this.props.refresh) {\n        this.state.instantSearchManager.clearCache();\n      }\n\n      if (prevProps.indexName !== this.props.indexName) {\n        this.state.instantSearchManager.updateIndex(this.props.indexName);\n      }\n\n      if (prevProps.searchClient !== this.props.searchClient) {\n        this.state.instantSearchManager.updateClient(this.props.searchClient);\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (isMetadataEnabled()) {\n        injectMetadata(this.state.instantSearchManager.widgetsManager.getWidgets(), this.props.searchClient);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.isUnmounting = true;\n      this.state.instantSearchManager.skipSearch();\n    }\n  }, {\n    key: \"createHrefForState\",\n    value: function createHrefForState(searchState) {\n      searchState = this.state.instantSearchManager.transitionState(searchState);\n      return this.state.isControlled && this.props.createURL ? this.props.createURL(searchState, this.getKnownKeys()) : '#';\n    }\n  }, {\n    key: \"onWidgetsInternalStateUpdate\",\n    value: function onWidgetsInternalStateUpdate(searchState) {\n      searchState = this.state.instantSearchManager.transitionState(searchState);\n      this.onSearchStateChange(searchState);\n\n      if (!this.state.isControlled) {\n        this.state.instantSearchManager.onExternalStateUpdate(searchState);\n      }\n    }\n  }, {\n    key: \"onSearchStateChange\",\n    value: function onSearchStateChange(searchState) {\n      if (this.props.onSearchStateChange && !this.isUnmounting) {\n        this.props.onSearchStateChange(searchState);\n      }\n    }\n  }, {\n    key: \"onSearchParameters\",\n    value: function onSearchParameters(getSearchParameters, context, props, getMetadata) {\n      if (this.props.onSearchParameters) {\n        var _searchState = this.props.searchState ? this.props.searchState : {};\n\n        this.props.onSearchParameters(getSearchParameters, context, props, _searchState);\n      }\n\n      if (this.props.widgetsCollector) {\n        var _searchState2 = this.props.searchState ? this.props.searchState : {};\n\n        this.props.widgetsCollector({\n          getSearchParameters: getSearchParameters,\n          getMetadata: getMetadata,\n          context: context,\n          props: props,\n          searchState: _searchState2\n        });\n      }\n    }\n  }, {\n    key: \"onSearchForFacetValues\",\n    value: function onSearchForFacetValues(searchState) {\n      this.state.instantSearchManager.onSearchForFacetValues(searchState);\n    }\n  }, {\n    key: \"getKnownKeys\",\n    value: function getKnownKeys() {\n      return this.state.instantSearchManager.getWidgetsIds();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (Children.count(this.props.children) === 0) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(InstantSearchProvider, {\n        value: this.state.contextValue\n      }, this.props.children);\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var nextIsControlled = isControlled(nextProps);\n      var previousSearchState = prevState.instantSearchManager.store.getState().widgets;\n      var nextSearchState = nextProps.searchState;\n\n      if (nextIsControlled && !isEqual(previousSearchState, nextSearchState)) {\n        prevState.instantSearchManager.onExternalStateUpdate(nextProps.searchState);\n      }\n\n      return {\n        isControlled: nextIsControlled,\n        contextValue: _objectSpread(_objectSpread({}, prevState.contextValue), {}, {\n          mainTargetedIndex: nextProps.indexName\n        })\n      };\n    }\n  }]);\n\n  return InstantSearch;\n}(Component);\n\n_defineProperty(InstantSearch, \"defaultProps\", {\n  stalledSearchDelay: 200,\n  refresh: false\n});\n\n_defineProperty(InstantSearch, \"propTypes\", {\n  // @TODO: These props are currently constant.\n  indexName: PropTypes.string.isRequired,\n  searchClient: PropTypes.shape({\n    search: PropTypes.func.isRequired,\n    searchForFacetValues: PropTypes.func,\n    addAlgoliaAgent: PropTypes.func,\n    clearCache: PropTypes.func\n  }).isRequired,\n  createURL: PropTypes.func,\n  refresh: PropTypes.bool,\n  searchState: PropTypes.object,\n  onSearchStateChange: PropTypes.func,\n  onSearchParameters: PropTypes.func,\n  widgetsCollector: PropTypes.func,\n  resultsState: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n  children: PropTypes.node,\n  stalledSearchDelay: PropTypes.number\n});\n\nexport default InstantSearch;","map":{"version":3,"sources":["/Users/tingting/code/tin2294/repository-search/node_modules/react-instantsearch-core/dist/es/widgets/InstantSearch.js"],"names":["_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","React","Component","Children","isEqual","PropTypes","createInstantSearchManager","InstantSearchProvider","isMetadataEnabled","injectMetadata","isControlled","props","searchState","InstantSearch","_Component","_super","_this","instantSearchManager","indexName","searchClient","initialState","resultsState","stalledSearchDelay","contextValue","store","widgetsManager","mainTargetedIndex","onInternalStateUpdate","onWidgetsInternalStateUpdate","bind","createHrefForState","onSearchForFacetValues","onSearchStateChange","onSearchParameters","state","value","componentDidUpdate","prevProps","prevIsControlled","Error","refresh","clearCache","updateIndex","updateClient","componentDidMount","getWidgets","componentWillUnmount","isUnmounting","skipSearch","transitionState","createURL","getKnownKeys","onExternalStateUpdate","getSearchParameters","context","getMetadata","_searchState","widgetsCollector","_searchState2","getWidgetsIds","render","count","children","createElement","getDerivedStateFromProps","nextProps","prevState","nextIsControlled","previousSearchState","getState","widgets","nextSearchState","string","isRequired","shape","search","func","searchForFacetValues","addAlgoliaAgent","bool","oneOfType","array","node","number"],"mappings":"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","sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component, Children } from 'react';\nimport isEqual from 'react-fast-compare';\nimport PropTypes from 'prop-types';\nimport createInstantSearchManager from \"../core/createInstantSearchManager.js\";\nimport { InstantSearchProvider } from \"../core/context.js\";\nimport { isMetadataEnabled, injectMetadata } from \"../core/metadata.js\";\n\nfunction isControlled(props) {\n  return Boolean(props.searchState);\n}\n/**\n * @description\n * `<InstantSearch>` is the root component of all React InstantSearch implementations.\n * It provides all the connected components (aka widgets) a means to interact\n * with the searchState.\n * @kind widget\n * @name <InstantSearch>\n * @requirements You will need to have an Algolia account to be able to use this widget.\n * [Create one now](https://www.algolia.com/users/sign_up).\n * @propType {string} indexName - Main index in which to search.\n * @propType {boolean} [refresh=false] - Flag to activate when the cache needs to be cleared so that the front-end is updated when a change occurs in the index.\n * @propType {object} [searchClient] - Provide a custom search client.\n * @propType {func} [onSearchStateChange] - Function to be called everytime a new search is done. Useful for [URL Routing](guide/Routing.html).\n * @propType {object} [searchState] - Object to inject some search state. Switches the InstantSearch component in controlled mode. Useful for [URL Routing](guide/Routing.html).\n * @propType {func} [createURL] - Function to call when creating links, useful for [URL Routing](guide/Routing.html).\n * @propType {SearchResults|SearchResults[]} [resultsState] - Use this to inject the results that will be used at first rendering. Those results are found by using the `findResultsState` function. Useful for [Server Side Rendering](guide/Server-side_rendering.html).\n * @propType {number} [stalledSearchDelay=200] - The amount of time before considering that the search takes too much time. The time is expressed in milliseconds.\n * @propType {{ Root: string|function, props: object }} [root] - Use this to customize the root element. Default value: `{ Root: 'div' }`\n * @example\n * import React from 'react';\n * import algoliasearch from 'algoliasearch/lite';\n * import { InstantSearch, SearchBox, Hits } from 'react-instantsearch-dom';\n *\n * const searchClient = algoliasearch(\n *   'latency',\n *   '6be0576ff61c053d5f9a3225e2a90f76'\n * );\n *\n * const App = () => (\n *   <InstantSearch\n *     searchClient={searchClient}\n *     indexName=\"instant_search\"\n *   >\n *     <SearchBox />\n *     <Hits />\n *   </InstantSearch>\n * );\n */\n\n\nvar InstantSearch = /*#__PURE__*/function (_Component) {\n  _inherits(InstantSearch, _Component);\n\n  var _super = _createSuper(InstantSearch);\n\n  function InstantSearch(props) {\n    var _this;\n\n    _classCallCheck(this, InstantSearch);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"isUnmounting\", false);\n\n    var instantSearchManager = createInstantSearchManager({\n      indexName: _this.props.indexName,\n      searchClient: _this.props.searchClient,\n      initialState: _this.props.searchState || {},\n      resultsState: _this.props.resultsState,\n      stalledSearchDelay: _this.props.stalledSearchDelay\n    });\n    var contextValue = {\n      store: instantSearchManager.store,\n      widgetsManager: instantSearchManager.widgetsManager,\n      mainTargetedIndex: _this.props.indexName,\n      onInternalStateUpdate: _this.onWidgetsInternalStateUpdate.bind(_assertThisInitialized(_this)),\n      createHrefForState: _this.createHrefForState.bind(_assertThisInitialized(_this)),\n      onSearchForFacetValues: _this.onSearchForFacetValues.bind(_assertThisInitialized(_this)),\n      onSearchStateChange: _this.onSearchStateChange.bind(_assertThisInitialized(_this)),\n      onSearchParameters: _this.onSearchParameters.bind(_assertThisInitialized(_this))\n    };\n    _this.state = {\n      isControlled: isControlled(_this.props),\n      instantSearchManager: instantSearchManager,\n      contextValue: contextValue\n    };\n    return _this;\n  }\n\n  _createClass(InstantSearch, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var prevIsControlled = isControlled(prevProps);\n\n      if (prevIsControlled && !this.state.isControlled) {\n        throw new Error(\"You can't switch <InstantSearch> from being controlled to uncontrolled\");\n      }\n\n      if (!prevIsControlled && this.state.isControlled) {\n        throw new Error(\"You can't switch <InstantSearch> from being uncontrolled to controlled\");\n      }\n\n      if (this.props.refresh !== prevProps.refresh && this.props.refresh) {\n        this.state.instantSearchManager.clearCache();\n      }\n\n      if (prevProps.indexName !== this.props.indexName) {\n        this.state.instantSearchManager.updateIndex(this.props.indexName);\n      }\n\n      if (prevProps.searchClient !== this.props.searchClient) {\n        this.state.instantSearchManager.updateClient(this.props.searchClient);\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (isMetadataEnabled()) {\n        injectMetadata(this.state.instantSearchManager.widgetsManager.getWidgets(), this.props.searchClient);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.isUnmounting = true;\n      this.state.instantSearchManager.skipSearch();\n    }\n  }, {\n    key: \"createHrefForState\",\n    value: function createHrefForState(searchState) {\n      searchState = this.state.instantSearchManager.transitionState(searchState);\n      return this.state.isControlled && this.props.createURL ? this.props.createURL(searchState, this.getKnownKeys()) : '#';\n    }\n  }, {\n    key: \"onWidgetsInternalStateUpdate\",\n    value: function onWidgetsInternalStateUpdate(searchState) {\n      searchState = this.state.instantSearchManager.transitionState(searchState);\n      this.onSearchStateChange(searchState);\n\n      if (!this.state.isControlled) {\n        this.state.instantSearchManager.onExternalStateUpdate(searchState);\n      }\n    }\n  }, {\n    key: \"onSearchStateChange\",\n    value: function onSearchStateChange(searchState) {\n      if (this.props.onSearchStateChange && !this.isUnmounting) {\n        this.props.onSearchStateChange(searchState);\n      }\n    }\n  }, {\n    key: \"onSearchParameters\",\n    value: function onSearchParameters(getSearchParameters, context, props, getMetadata) {\n      if (this.props.onSearchParameters) {\n        var _searchState = this.props.searchState ? this.props.searchState : {};\n\n        this.props.onSearchParameters(getSearchParameters, context, props, _searchState);\n      }\n\n      if (this.props.widgetsCollector) {\n        var _searchState2 = this.props.searchState ? this.props.searchState : {};\n\n        this.props.widgetsCollector({\n          getSearchParameters: getSearchParameters,\n          getMetadata: getMetadata,\n          context: context,\n          props: props,\n          searchState: _searchState2\n        });\n      }\n    }\n  }, {\n    key: \"onSearchForFacetValues\",\n    value: function onSearchForFacetValues(searchState) {\n      this.state.instantSearchManager.onSearchForFacetValues(searchState);\n    }\n  }, {\n    key: \"getKnownKeys\",\n    value: function getKnownKeys() {\n      return this.state.instantSearchManager.getWidgetsIds();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (Children.count(this.props.children) === 0) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(InstantSearchProvider, {\n        value: this.state.contextValue\n      }, this.props.children);\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var nextIsControlled = isControlled(nextProps);\n      var previousSearchState = prevState.instantSearchManager.store.getState().widgets;\n      var nextSearchState = nextProps.searchState;\n\n      if (nextIsControlled && !isEqual(previousSearchState, nextSearchState)) {\n        prevState.instantSearchManager.onExternalStateUpdate(nextProps.searchState);\n      }\n\n      return {\n        isControlled: nextIsControlled,\n        contextValue: _objectSpread(_objectSpread({}, prevState.contextValue), {}, {\n          mainTargetedIndex: nextProps.indexName\n        })\n      };\n    }\n  }]);\n\n  return InstantSearch;\n}(Component);\n\n_defineProperty(InstantSearch, \"defaultProps\", {\n  stalledSearchDelay: 200,\n  refresh: false\n});\n\n_defineProperty(InstantSearch, \"propTypes\", {\n  // @TODO: These props are currently constant.\n  indexName: PropTypes.string.isRequired,\n  searchClient: PropTypes.shape({\n    search: PropTypes.func.isRequired,\n    searchForFacetValues: PropTypes.func,\n    addAlgoliaAgent: PropTypes.func,\n    clearCache: PropTypes.func\n  }).isRequired,\n  createURL: PropTypes.func,\n  refresh: PropTypes.bool,\n  searchState: PropTypes.object,\n  onSearchStateChange: PropTypes.func,\n  onSearchParameters: PropTypes.func,\n  widgetsCollector: PropTypes.func,\n  resultsState: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n  children: PropTypes.node,\n  stalledSearchDelay: PropTypes.number\n});\n\nexport default InstantSearch;"]},"metadata":{},"sourceType":"module"}