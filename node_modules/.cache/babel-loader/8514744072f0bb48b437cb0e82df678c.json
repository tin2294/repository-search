{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport createConnector from \"../core/createConnector.js\";\nimport { omit, getObjectType, getPropertyByPath, removeEmptyKey, removeEmptyArraysFromObject } from \"../core/utils.js\";\nimport { refineValue, getIndexId, hasMultipleIndices } from \"../core/indexUtils.js\";\n\nfunction createOptionalFilter(_ref) {\n  var attributeName = _ref.attributeName,\n      attributeValue = _ref.attributeValue,\n      attributeScore = _ref.attributeScore;\n  return \"\".concat(attributeName, \":\").concat(attributeValue, \"<score=\").concat(attributeScore || 1, \">\");\n}\n\nvar defaultProps = {\n  transformSearchParameters: function transformSearchParameters(x) {\n    return _objectSpread({}, x);\n  }\n};\n\nfunction getId() {\n  // We store the search state of this widget in `configure`.\n  return 'configure';\n}\n\nfunction getSearchParametersFromProps(props) {\n  var optionalFilters = Object.keys(props.matchingPatterns).reduce(function (acc, attributeName) {\n    var attributePattern = props.matchingPatterns[attributeName];\n    var attributeValue = getPropertyByPath(props.hit, attributeName);\n    var attributeScore = attributePattern.score;\n\n    if (Array.isArray(attributeValue)) {\n      return [].concat(_toConsumableArray(acc), [attributeValue.map(function (attributeSubValue) {\n        return createOptionalFilter({\n          attributeName: attributeName,\n          attributeValue: attributeSubValue,\n          attributeScore: attributeScore\n        });\n      })]);\n    }\n\n    if (typeof attributeValue === 'string') {\n      return [].concat(_toConsumableArray(acc), [createOptionalFilter({\n        attributeName: attributeName,\n        attributeValue: attributeValue,\n        attributeScore: attributeScore\n      })]);\n    }\n\n    if (process.env.NODE_ENV === 'development') {\n      // eslint-disable-next-line no-console\n      console.warn(\"The `matchingPatterns` option returned a value of type \".concat(getObjectType(attributeValue), \" for the \\\"\").concat(attributeName, \"\\\" key. This value was not sent to Algolia because `optionalFilters` only supports strings and array of strings.\\n\\nYou can remove the \\\"\").concat(attributeName, \"\\\" key from the `matchingPatterns` option.\\n\\nSee https://www.algolia.com/doc/api-reference/api-parameters/optionalFilters/\"));\n    }\n\n    return acc;\n  }, []);\n  return props.transformSearchParameters(new algoliasearchHelper.SearchParameters({\n    // @ts-ignore @TODO algoliasearch-helper@3.0.1 will contain the type\n    // `sumOrFiltersScores`.\n    // See https://github.com/algolia/algoliasearch-helper-js/pull/753\n    sumOrFiltersScores: true,\n    facetFilters: [\"objectID:-\".concat(props.hit.objectID)],\n    optionalFilters: optionalFilters\n  }));\n}\n\nexport default createConnector({\n  displayName: 'AlgoliaConfigureRelatedItems',\n  defaultProps: defaultProps,\n  getProvidedProps: function getProvidedProps() {\n    return {};\n  },\n  getSearchParameters: function getSearchParameters(searchParameters, props) {\n    return searchParameters.setQueryParameters(getSearchParametersFromProps(props));\n  },\n  transitionState: function transitionState(props, _prevSearchState, nextSearchState) {\n    var id = getId(); // We need to transform the exhaustive search parameters back to clean\n    // search parameters without the empty default keys so we don't pollute the\n    // `configure` search state.\n\n    var searchParameters = removeEmptyArraysFromObject(removeEmptyKey(getSearchParametersFromProps(props)));\n    var searchParametersKeys = Object.keys(searchParameters);\n    var nonPresentKeys = this._searchParameters ? Object.keys(this._searchParameters).filter(function (prop) {\n      return searchParametersKeys.indexOf(prop) === -1;\n    }) : [];\n    this._searchParameters = searchParameters;\n\n    var nextValue = _defineProperty({}, id, _objectSpread(_objectSpread({}, omit(nextSearchState[id], nonPresentKeys)), searchParameters));\n\n    return refineValue(nextSearchState, nextValue, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n  },\n  cleanUp: function cleanUp(props, searchState) {\n    var _this = this;\n\n    var id = getId();\n    var indexId = getIndexId({\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n    var subState = hasMultipleIndices({\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    }) && searchState.indices ? searchState.indices[indexId] : searchState;\n    var configureKeys = subState && subState[id] ? Object.keys(subState[id]) : [];\n    var configureState = configureKeys.reduce(function (acc, item) {\n      if (!_this._searchParameters[item]) {\n        acc[item] = subState[id][item];\n      }\n\n      return acc;\n    }, {});\n\n    var nextValue = _defineProperty({}, id, configureState);\n\n    return refineValue(searchState, nextValue, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n  }\n});","map":{"version":3,"sources":["/Users/tingting/code/tin2294/repository-search/node_modules/react-instantsearch-core/dist/es/connectors/connectConfigureRelatedItems.js"],"names":["_toConsumableArray","_defineProperty","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","algoliasearchHelper","createConnector","omit","getObjectType","getPropertyByPath","removeEmptyKey","removeEmptyArraysFromObject","refineValue","getIndexId","hasMultipleIndices","createOptionalFilter","_ref","attributeName","attributeValue","attributeScore","concat","defaultProps","transformSearchParameters","x","getId","getSearchParametersFromProps","props","optionalFilters","matchingPatterns","reduce","acc","attributePattern","hit","score","Array","isArray","map","attributeSubValue","process","env","NODE_ENV","console","warn","SearchParameters","sumOrFiltersScores","facetFilters","objectID","displayName","getProvidedProps","getSearchParameters","searchParameters","setQueryParameters","transitionState","_prevSearchState","nextSearchState","id","searchParametersKeys","nonPresentKeys","_searchParameters","prop","indexOf","nextValue","ais","contextValue","multiIndexContext","indexContextValue","cleanUp","searchState","_this","indexId","subState","indices","configureKeys","configureState","item"],"mappings":"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","sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport createConnector from \"../core/createConnector.js\";\nimport { omit, getObjectType, getPropertyByPath, removeEmptyKey, removeEmptyArraysFromObject } from \"../core/utils.js\";\nimport { refineValue, getIndexId, hasMultipleIndices } from \"../core/indexUtils.js\";\n\nfunction createOptionalFilter(_ref) {\n  var attributeName = _ref.attributeName,\n      attributeValue = _ref.attributeValue,\n      attributeScore = _ref.attributeScore;\n  return \"\".concat(attributeName, \":\").concat(attributeValue, \"<score=\").concat(attributeScore || 1, \">\");\n}\n\nvar defaultProps = {\n  transformSearchParameters: function transformSearchParameters(x) {\n    return _objectSpread({}, x);\n  }\n};\n\nfunction getId() {\n  // We store the search state of this widget in `configure`.\n  return 'configure';\n}\n\nfunction getSearchParametersFromProps(props) {\n  var optionalFilters = Object.keys(props.matchingPatterns).reduce(function (acc, attributeName) {\n    var attributePattern = props.matchingPatterns[attributeName];\n    var attributeValue = getPropertyByPath(props.hit, attributeName);\n    var attributeScore = attributePattern.score;\n\n    if (Array.isArray(attributeValue)) {\n      return [].concat(_toConsumableArray(acc), [attributeValue.map(function (attributeSubValue) {\n        return createOptionalFilter({\n          attributeName: attributeName,\n          attributeValue: attributeSubValue,\n          attributeScore: attributeScore\n        });\n      })]);\n    }\n\n    if (typeof attributeValue === 'string') {\n      return [].concat(_toConsumableArray(acc), [createOptionalFilter({\n        attributeName: attributeName,\n        attributeValue: attributeValue,\n        attributeScore: attributeScore\n      })]);\n    }\n\n    if (process.env.NODE_ENV === 'development') {\n      // eslint-disable-next-line no-console\n      console.warn(\"The `matchingPatterns` option returned a value of type \".concat(getObjectType(attributeValue), \" for the \\\"\").concat(attributeName, \"\\\" key. This value was not sent to Algolia because `optionalFilters` only supports strings and array of strings.\\n\\nYou can remove the \\\"\").concat(attributeName, \"\\\" key from the `matchingPatterns` option.\\n\\nSee https://www.algolia.com/doc/api-reference/api-parameters/optionalFilters/\"));\n    }\n\n    return acc;\n  }, []);\n  return props.transformSearchParameters(new algoliasearchHelper.SearchParameters({\n    // @ts-ignore @TODO algoliasearch-helper@3.0.1 will contain the type\n    // `sumOrFiltersScores`.\n    // See https://github.com/algolia/algoliasearch-helper-js/pull/753\n    sumOrFiltersScores: true,\n    facetFilters: [\"objectID:-\".concat(props.hit.objectID)],\n    optionalFilters: optionalFilters\n  }));\n}\n\nexport default createConnector({\n  displayName: 'AlgoliaConfigureRelatedItems',\n  defaultProps: defaultProps,\n  getProvidedProps: function getProvidedProps() {\n    return {};\n  },\n  getSearchParameters: function getSearchParameters(searchParameters, props) {\n    return searchParameters.setQueryParameters(getSearchParametersFromProps(props));\n  },\n  transitionState: function transitionState(props, _prevSearchState, nextSearchState) {\n    var id = getId(); // We need to transform the exhaustive search parameters back to clean\n    // search parameters without the empty default keys so we don't pollute the\n    // `configure` search state.\n\n    var searchParameters = removeEmptyArraysFromObject(removeEmptyKey(getSearchParametersFromProps(props)));\n    var searchParametersKeys = Object.keys(searchParameters);\n    var nonPresentKeys = this._searchParameters ? Object.keys(this._searchParameters).filter(function (prop) {\n      return searchParametersKeys.indexOf(prop) === -1;\n    }) : [];\n    this._searchParameters = searchParameters;\n\n    var nextValue = _defineProperty({}, id, _objectSpread(_objectSpread({}, omit(nextSearchState[id], nonPresentKeys)), searchParameters));\n\n    return refineValue(nextSearchState, nextValue, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n  },\n  cleanUp: function cleanUp(props, searchState) {\n    var _this = this;\n\n    var id = getId();\n    var indexId = getIndexId({\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n    var subState = hasMultipleIndices({\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    }) && searchState.indices ? searchState.indices[indexId] : searchState;\n    var configureKeys = subState && subState[id] ? Object.keys(subState[id]) : [];\n    var configureState = configureKeys.reduce(function (acc, item) {\n      if (!_this._searchParameters[item]) {\n        acc[item] = subState[id][item];\n      }\n\n      return acc;\n    }, {});\n\n    var nextValue = _defineProperty({}, id, configureState);\n\n    return refineValue(searchState, nextValue, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n  }\n});"]},"metadata":{},"sourceType":"module"}